<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>TOEIC vocabulary</title>
    <style>
    /* Basic styles */
*,
*::before,
*::after {
  box-sizing: border-box; }

html,
body {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  margin: 0;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  background: #373737;
  font-family: Roboto, Arial, helvetica, sans-serif; }
  html #container,
  body #container {
    perspective: 1000px;
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: row;
    align-items: center;
    align-content: center;
    margin: auto;
    text-align: center;
    justify-content: center; }
    html #container .box,
    body #container .box {
      display: flex;
      flex-direction: column;
      align-items: center;
      align-content: center;
      justify-content: center;
      width: 80vw;
      height: 80vh;
      border: 5px solid white;
      border-radius: 3px;
      backface-visibility: hidden;
      box-shadow: 0px 0px 9px 0px rgba(0, 0, 0, 0.75);
      position: absolute; }
      html #container .box.front,
      body #container .box.front {
        background-image: linear-gradient(to right top, #424f41, #435440, #445a3f, #465f3d, #48643b, #47693f, #456e44, #437349, #3c7957, #377e65, #338374, #338781); }
      html #container .box.back,
      body #container .box.back {
        transform: rotateY(180deg);
        background-image: linear-gradient(to right top, #6b70d1, #6a69b9, #6762a2, #625c8c, #5c5676, #52536e, #4a5065, #444c5b, #384b5a, #2b4b56, #1f4a4f, #1a4845); }
      html #container .box .word,
      body #container .box .word {
        color: white;
        font-size: 3rem;
        padding: 1em 0;
        text-shadow: 0px 0px 2px black;
        -webkit-touch-callout: none;
        /* iOS Safari */
        -webkit-user-select: none;
        /* Safari */
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none; }
    html #container.active .box,
    body #container.active .box {
      animation-play-state: running;
      animation-name: shadow; }
    html #container.active .front,
    body #container.active .front {
      animation: front 650ms 0s 1 linear forwards; }
    html #container.active .back,
    body #container.active .back {
      animation: back 650ms 0s 1 linear forwards; }
    html #container.reverse .box,
    body #container.reverse .box {
      animation-direction: reverse; }
      html #container.reverse .box.front,
      body #container.reverse .box.front {
        transform: scale(1) rotateY(180deg); }
      html #container.reverse .box.back,
      body #container.reverse .box.back {
        transform: scale(1) rotateY(360deg); }

a {
  text-decoration: none;
  color: #FFF;
  position: fixed;
  top: 10px; }

.rainbow-button {
  width: calc(20vw + 6px);
  height: calc(8vw + 6px);
  background-image: linear-gradient(90deg, #00C0FF 0%, #FFCF00 49%, #FC4F4F 80%, #00C0FF 100%);
  border-radius: 5px;
  display: flex;
  align-items: center;
  justify-content: center;
  text-transform: uppercase;
  font-size: 3vw;
  font-weight: bold; }

.rainbow-button:after {
  content: attr(alt);
  width: 20vw;
  height: 8vw;
  background-color: #191919;
  display: flex;
  align-items: center;
  justify-content: center; }

.rainbow-button:hover {
  animation: slidebg 2s linear infinite; }

/* Animations */
@keyframes back {
  0% {
    transform: scale(1) rotateY(180deg); }
  10% {
    transform: scale(1.00077) rotateY(180deg); }
  20% {
    transform: scale(1.02458) rotateY(180deg); }
  30% {
    transform: scale(1.12542) rotateY(180.17136deg); }
  40% {
    transform: scale(1.14923) rotateY(185.48343deg); }
  50% {
    transform: scale(1.15) rotateY(221.63979deg); }
  60% {
    transform: scale(1.14923) rotateY(318.36021deg); }
  70% {
    transform: scale(1.12542) rotateY(354.51657deg); }
  80% {
    transform: scale(1.02458) rotateY(359.82864deg); }
  90% {
    transform: scale(1.00077) rotateY(360deg); }
  100% {
    transform: scale(1) rotateY(360deg); } }

@keyframes front {
  0% {
    transform: scale(1) rotateY(0deg); }
  10% {
    transform: scale(1.00077) rotateY(0deg); }
  20% {
    transform: scale(1.02458) rotateY(0deg); }
  30% {
    transform: scale(1.12542) rotateY(0.17136deg); }
  40% {
    transform: scale(1.14923) rotateY(5.48343deg); }
  50% {
    transform: scale(1.15) rotateY(41.63979deg); }
  60% {
    transform: scale(1.14923) rotateY(138.36021deg); }
  70% {
    transform: scale(1.12542) rotateY(174.51657deg); }
  80% {
    transform: scale(1.02458) rotateY(179.82864deg); }
  90% {
    transform: scale(1.00077) rotateY(180deg); }
  100% {
    transform: scale(1) rotateY(180deg); } }

@keyframes buttonClick {
  from {
    box-shadow: #ffe0b2 0px 0px 0px 0px; }
  to {
    box-shadow: rgba(255, 224, 178, 0) 0px 0px 0px 10px; } }

@keyframes slidebg {
  to {
    background-position: 20vw; } }

	  </style>
	  <script src="./words.js"></script>
	  
	  <script>
	  window.onload = () => {
  const container = document.getElementById("container"),
        englishWord = container.querySelector(".front > .word"),
        frenchWord = container.querySelector(".back > .word"),
        buttonFullscreen = document.querySelector(".fullscreen"),
        nexWord = () => {
          if (!container.classList.contains('active')) {
            const index = Math.floor(Math.random()*words.length),
                word = words[index];
            frenchWord.innerText = word.french;
            englishWord.innerText = word.english;
            container.classList.remove('reverse');
          }
        }

  container.querySelectorAll(".box")
    .forEach(e => e.onclick=()=> {
    if (!container.classList.contains('active')) {
      container.classList.toggle('active');
      setTimeout(()=>{
        container.classList.toggle('active');
        container.classList.toggle('reverse');
      }, 680);
    }  
  });
  buttonFullscreen.onclick = () => {
    if (!document.fullscreenElement) {
      openFullscreen(document.documentElement);
    }
    else {
      closeFullscreen();
    }
  }
  
  function openFullscreen(elem) {
    if (elem.requestFullscreen) {
      elem.requestFullscreen();
    } else if (elem.mozRequestFullScreen) { /* Firefox */
      elem.mozRequestFullScreen();
    } else if (elem.webkitRequestFullscreen) { /* Chrome, Safari and Opera */
      elem.webkitRequestFullscreen();
    } else if (elem.msRequestFullscreen) { /* IE/Edge */
      elem.msRequestFullscreen();
    }
  }
  
  function closeFullscreen() {
    if (document.exitFullscreen) {
      document.exitFullscreen();
    } else if (document.mozCancelFullScreen) { /* Firefox */
      document.mozCancelFullScreen();
    } else if (document.webkitExitFullscreen) { /* Chrome, Safari and Opera */
      document.webkitExitFullscreen();
    } else if (document.msExitFullscreen) { /* IE/Edge */
      document.msExitFullscreen();
    }
  }

  document.addEventListener('touchstart', handleTouchStart, false);    
  document.addEventListener('touchmove', handleTouchMove, false);

  var xDown = null;  
  var yDown = null;                                                        

  function handleTouchStart(evt) {                                       
      xDown = evt.touches[0].clientX;  
      yDown = evt.touches[0].clientY; 
  };                                                


  function handleTouchMove(evt) {
      if ( ! xDown || ! yDown ) {
          return;
      }

      var xUp = evt.touches[0].clientX;   
      var yUp = evt.touches[0].clientY;

      var xDiff = xDown - xUp;
      var yDiff = yDown - yUp;

      if ( Math.abs( xDiff ) > Math.abs( yDiff ) ) { /*most significant*/
          if ( xDiff > 0 ) {
               /* Left swipe */
                nexWord();
          } else {
             /* Right swipe */
             nexWord();
          }                       
      } else {
          if ( yDiff > 0 ) {
                /* UP swipe */
          } else { 
                /* down swipe */
          }    
      }
      /* reset values */
      xDown = null;
      yDown = null;                                             
  };
}
	  </script>
  </head>
   <body>
    <div id="container">
      <div class="box front">
        <div class="word">
          english version
        </div>
      </div>
      <div class="box back">
        <div class="word">
          french version
        </div>
      </div>
    </div>
    <a href="#" class="rainbow-button fullscreen" alt="Fulscreen"></a>
  </body>
</html>
